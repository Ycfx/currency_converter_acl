'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},Select=function(a,b){this.target=null,this.select=null,this.display=null,this.list=null,this.options=[],this.isLarge=!1,this.value=null,this.selected=null,this.settings=null,this.highlighted=null,this.init=function(){switch('undefined'==typeof a?'undefined':_typeof(a)){case'object':this.target=a;break;case'string':this.target=document.querySelector(a);}this.settings=this.getSettings(b),this.buildSelect(),this.target.parentNode.replaceChild(this.select,this.target),this.target.style.display='none',this.select.appendChild(this.target),document.addEventListener('click',this.handleClickOff.bind(this)),this.positionList()},this.buildSelect=function(){this.select=document.createElement('div'),this.select.classList.add('select'),this.select.setAttribute('tabindex',this.target.tabIndex),this.select.addEventListener('keydown',this.handleSelectKeydown.bind(this)),this.display=document.createElement('span'),this.display.classList.add('value'),this.display.addEventListener('click',this.handleDisplayClick.bind(this)),this.select.appendChild(this.display),this.buildList(),this.options.length&&(this.value=this.options[this.target.selectedIndex].getAttribute('data-value'),this.selected=this.options[this.target.selectedIndex],this.display.innerHTML=this.selected.innerHTML),this.display.innerHTML=this.target.getAttribute('placeholder'),this.display.classList.add('select_placeholder'),('auto'===this.settings.filtered&&this.options.length>=this.settings.filter_threshold||!0===this.settings.filtered)&&(this.isLarge=!0,this.select.classList.add('large'))},this.buildList=function(){this.list=document.createElement('div'),this.list.classList.add('list'),this.list.setAttribute('tabindex','-1'),this.list.addEventListener('keydown',this.handleListKeydown.bind(this)),this.list.addEventListener('mouseenter',function(){this.options[this.highlighted].classList.remove('hovered')}.bind(this)),this.highlighted=this.target.selectedIndex,this.buildFilter(),this.buildOptions(),this.select.appendChild(this.list)},this.buildFilter=function(){var c=document.createElement('div');c.classList.add('filter'),this.filter=document.createElement('input'),this.filter.type='text',this.filter.setAttribute('placeholder',this.settings.filter_placeholder),this.filter.addEventListener('keyup',this.handleFilterKeyup.bind(this)),this.clear=document.createElement('a'),this.clear.innerHTML='Clear',this.clear.classList.add('select_clear'),this.clear.addEventListener('click',this.handleClearSelect.bind(this)),c.appendChild(this.filter),c.appendChild(this.clear),this.list.appendChild(c)},this.buildOptions=function(){for(var g,c=document.createElement('ul'),d=this.target.querySelectorAll('option'),f=0;f<d.length;f++)g=document.createElement('li'),g.setAttribute('data-value',d[f].value),g.innerHTML=d[f].innerHTML,g.addEventListener('click',this.handleOptionClick.bind(this)),c.appendChild(g),this.options.push(g);this.list.appendChild(c)},this.toggleList=function(){this.list.classList.contains('open')?(this.list.classList.remove('open'),this.options[this.highlighted].classList.remove('hovered'),this.select.focus()):(this.options[this.target.selectedIndex].classList.add('hovered'),this.highlighted=this.target.selectedIndex,this.list.classList.add('open'),this.list.focus())},this.positionList=function(){this.isLarge||(this.list.style.top='-'+this.selected.offsetTop+'px')},this.highlightOption=function(c){var d=null;d='up'===c?0>this.highlighted-1?this.highlighted:this.highlighted-1:'down'===c?this.highlighted+1>this.options.length-1?this.highlighted:this.highlighted+1:this.highlighted;this.options[this.highlighted].classList.remove('hovered'),this.options[d].classList.add('hovered'),this.highlighted=d},this.clearFilter=function(){this.filter.value='';for(var c=0;c<this.options.length;c++)this.options[c].style.display='block'},this.closeList=function(){this.list.classList.remove('open'),this.options[this.highlighted].classList.remove('hovered')},this.getSettings=function(c){var d={filtered:'auto',filter_threshold:8,filter_placeholder:'Filter options...'};for(var f in c)d[f]=c[f];return d},this.handleSelectKeydown=function(c){this.select===document.activeElement&&32==c.keyCode&&this.toggleList()},this.handleDisplayClick=function(){this.list.classList.add('open'),this.isLarge&&this.filter.focus()},this.handleListKeydown=function(c){if(this.list===document.activeElement)switch(c.keyCode){case 38:this.highlightOption('up');break;case 40:this.highlightOption('down');break;case 13:this.target.value=this.options[this.highlighted].getAttribute('data-value'),this.selected=this.options[this.highlighted],this.display.innerHTML=this.options[this.highlighted].innerHTML,this.closeList(),setTimeout(this.positionList.bind(this),200),this.select.focus();}},this.handleFilterKeyup=function(){var d=this;this.options.filter(function(f){f.style.display=f.innerHTML.substring(0,d.filter.value.length).toLowerCase()==d.filter.value.toLowerCase()?'block':'none'})},this.handleOptionClick=function(c){this.target.value=c.target.getAttribute('data-value'),this.target.value?(this.display.classList.remove('select_placeholder'),this.display.innerHTML=c.target.innerHTML,this.value=this.target.value,this.selected=c.target):(this.display.innerHTML=this.target.getAttribute('placeholder'),this.display.classList.add('select_placeholder')),this.closeList(),this.clearFilter(),setTimeout(this.positionList.bind(this),200)},this.handleClickOff=function(c){this.select.contains(c.target)||this.closeList()},this.handleClearSelect=function(){this.display.innerHTML=this.target.getAttribute('placeholder'),this.display.classList.add('select_placeholder'),this.target.value=void 0,this.value=void 0,this.selected=void 0,this.closeList(),this.clearFilter()},this.init()};